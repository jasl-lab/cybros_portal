<div class="row">
  <div class="col-12">
    <h3 class="page-title">
      <%= t(".title") %>
    </h3>
    <%= form_tag report_labor_cost_monthly_adjust_path, method: :get, class: 'form-inline' do -%>
      <div class="form-group m-1">
        <label class="mr-1"><%= t(".month_name") -%>ï¼š</label>
        <%= select_tag 'month_name', options_for_select(@all_month_names, @month_name), class: 'form-control' %>
      </div>
      <div class="m-1">
        <%= submit_tag t(".confirm"), class: 'btn btn-thape-color' %>
      </div>
    <% end -%>
    <div class="row mt-3">
      <div class="col-12">
        <table class="table table-striped">
          <thead>
            <tr>
              <th><%= t('.clerk_code') -%></th>
              <th><%= t('.chinese_name') -%></th>
              <th><%= t('.company_name') -%></th>
              <th><%= t('.department') -%></th>
              <th><%= t('.position_name') -%></th>

              <th><%= t('.user_cost_type') -%></th>
              <th><%= t('.user_job_type') -%></th>
              <th><%= t('.amount') -%></th>
              <th><%= t('.user_status.title') -%></th>
              <th><%= t('.adjust_user') -%></th>
            </tr>
          </thead>
          <tbody>
            <% @cspms.each do |cspm| %>
              <tr>
                <td><%= cspm.clerk_code -%></td>
                <td><%= cspm.chinese_name -%></td>
                <td><%= cspm.company_name -%></td>
                <td><%= cspm.department_name -%></td>
                <td><%= cspm.position_name -%></td>

                <td><%= cspm.user_cost_type_name -%></td>
                <td><%= cspm.user_job_type_name -%></td>
                <td><%= cspm.amount -%></td>
                <td>
                  <% if cspm.locked_at.present? %>
                    <span class="badge badge-danger">
                      <%= t(".user_status.locked") %>
                    </span>
                  <% end %>
                </td>
                <td><%= cspm.adjust_user_name -%></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <div class="col-12">
        <%= paginate @cspms %>
      </div>
    </div>
  </div>
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <strong><%= t('.adjust_form.header') %></strong>
      </div>
      <%= form_with url: report_labor_cost_monthly_adjust_path, class: 'form-horizontal', local: true do |f| %>
        <div class="card-body">
          <div class="row">
            <div class="col-md-3">
              <div class="form-group">
                <label class="col-form-label" for="text-input-clerk-code"><%= t('.adjust_form.clerk_code') %></label>
                <%= text_field_tag :clerk_code, @clerk_code, class: 'form-control', id: 'text-input-clerk-code' -%>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <label class="col-form-label" for="text-input-chinese-name"><%= t('.adjust_form.chinese_name') %></label>
                <%= text_field_tag :chinese_name, @chinese_name, class: 'form-control', id: 'text-input-chinese-name' -%>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-3">
              <div class="form-group">
                <label class="col-form-label" for="text-input-out-company-code"><%= t('.adjust_form.out_company_code') %></label>
                <%= select_tag :out_company_code, options_for_select(@org_codes), class: 'form-control-plaintext form-control', id: 'select-input-out-company-code', data: { remote: true, type: :script, url: url_for(controller: 'report/labor_cost_monthly_adjusts', action: 'out_company_code_change', format: 'js')} %>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <label class="col-form-label" for="text-input-out-department"><%= t('.adjust_form.out_department') %></label>
                <%= text_field_tag :out_department, @out_department, class: 'form-control', id: 'text-input-out-department' -%>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <label class="col-form-label" for="text-input-out-position"><%= t('.adjust_form.out_position') %></label>
                <%= text_field_tag :out_position, @out_position, class: 'form-control', id: 'text-input-out-position' -%>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <label class="col-form-label" for="text-input-out-user-cost-type"><%= t('.adjust_form.out_user_cost_type') %></label>
                <%= text_field_tag :out_user_cost_type, @out_user_cost_type, class: 'form-control', id: 'text-input-out-user-cost-type' -%>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-3">
              <div class="form-group">
                <label class="col-form-label" for="text-input-in-company"><%= t('.adjust_form.in_company') %></label>
                <%= text_field_tag :in_company, @in_company, class: 'form-control', id: 'text-input-in-company' -%>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <label class="col-form-label" for="text-input-in-department"><%= t('.adjust_form.in_department') %></label>
                <%= text_field_tag :in_department, @in_department, class: 'form-control', id: 'text-input-in-department' -%>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <label class="col-form-label" for="text-input-in-position"><%= t('.adjust_form.in_position') %></label>
                <%= text_field_tag :in_position, @in_position, class: 'form-control', id: 'text-input-in-position' -%>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <label class="col-form-label" for="text-input-in-user-cost-type"><%= t('.adjust_form.in_user_cost_type') %></label>
                <%= text_field_tag :in_user_cost_type, @in_user_cost_type, class: 'form-control', id: 'text-input-in-user-cost-type' -%>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-3">
              <div class="form-group">
                <label class="col-form-label" for="text-input-adjustment-amount"><%= t('.adjust_form.adjustment_amount') %></label>
                <%= text_field_tag :adjustment_amount, @adjustment_amount, class: 'form-control', id: 'text-input-adjustment-amount' -%>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label class="col-form-label" for="text-input-adjustment-reason"><%= t('.adjust_form.adjustment_reason') %></label>
                <%= text_field_tag :adjustment_reason, @adjustment_reason, class: 'form-control', id: 'text-input-adjustment-reason' -%>
              </div>
            </div>
          </div>
        </div>

        <div class="card-footer">
          <%= f.submit t('.adjust_form.submit'), class: 'btn btn-primary' %>
        </div>
      <% end %>
    </div>
  </div>
</div>
