<div class="row">
  <div class="col-lg-12">
    <h3 class="page-title">
      <%= t(".title") %>
    </h3>
    <%= form_tag report_people_workloading_path, method: :get do -%>
      <div class="form-row">
        <div class="form-group col-md-2">
          <label class="mr-1"><%= t(".ncworkno") -%>：</label>
          <%= text_field_tag 'ncworkno', @ncworkno, class: 'form-control' -%>
        </div>
        <div class="form-group col-md-2">
          <label class="mr-1"><%= t(".begin_date") -%>：</label>
          <%= text_field_tag 'begin_date', @begin_date.to_date, class: 'form-control' %>
        </div>
        <div class="form-group col-md-2">
          <label class="mr-1"><%= t(".end_date") -%>：</label>
          <%= text_field_tag 'end_date', @end_date.to_date, class: 'form-control' %>
        </div>
        <div class="form-group col-md-2">
          <label class="mr-1">&nbsp;</label>
          <div class="form-control form-button">
            <%= submit_tag t(".confirm"), class: 'btn btn-primary' %>
          </div>
        </div>
      </div>
    <% end -%>
  </div>
</div>
<div class="row">
  <% @months.each do |m| %>
    <% data = policy_scope(Bi::WorkHoursCountCombine).where(date: m.first..(m.last-1.day), ncworkno: @ncworkno) %>
    <div class="col-lg-12 col-xl-6">
      <h5><%= m.first.to_s(:month_and_year) %></h5>
      <%= month_calendar attribute: :date, start_date: m.first, end_date: (m.last-1.day), events: data do |date, events| %>
        <%= date.day %>

        <% events.each do |event| %>
          <div>
            项目：<%= event.prjno %>
            <br />
            实填：<%= event.realhours %>
          </div>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>
